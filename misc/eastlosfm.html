<!DOCTYPE html>
<html lang="en">

<head><script>
    if (window.location.host.includes('.pages.dev')) { window.location.href = `https://ex3.lol${window.location.pathname}`; }
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>East Los FM</title>
    <meta name="title" content="East Los FM" />
    <meta name="description" content="The best radio station in the world" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://ex3.lol/" />
    <meta property="og:title" content="East Los FM" />
    <meta property="og:description" content="The best radio station in the world" />
    <meta property="og:image" content="https://ex3.lol/favicon.ico" />
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://ex3.lol/" />
    <meta property="twitter:title" content="East Los FM" />
    <meta property="twitter:description" content="The best radio station in the world" />
    <meta property="twitter:image" content="https://ex3.lol/favicon.ico" />
    <link rel="stylesheet" href="/files/stylesheet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style> .highlight { color: goldenrod }#tracklist {cursor: pointer; }</style> 
    <link rel="icon" href="/files/media/los.svg" type="image/svg+xml">
</head>

<body>

    <div class="navbar">
        <h4><a href="/">exerinity</a></h4>
        <br>
        <ul>
            <li><a href="/misc/email">email</a></li>
            <li><a href="/">back</a></li>
        </ul>
    </div>

    <div class="container">
        <h1>East Los FM</h1>
        <noscript>
            <h2>JavaScript is disabled</h2>
            <p>Please enable it to play this awesome array of tracks. <i><a href="https://www.enable-javascript.com/" style="text-decoration: underline;">How do I enable it?</a></i></p>
        </noscript>
        <h2><i class="fa-solid fa-radio"></i> Tracklist:<br><footer style="font-size: 15px">(click on a track to jump to it)</footer></h2>
        <ul id="tracklist">
            <li id="track0">Intro</li>
            <li id="track1">"El Cocaino" by Los Buitres de Culiacan</li>
            <li id="track2">"Es-Toy" by Mexican Institute of Sound</li>
            <li id="track3">"Criminal Sound" by Niña Dioz</li>
            <li id="track4">"Radio Capital" by La Vida Bohème</li>
            <li id="track5">"Autos, Moda y Rock and Roll" by Fandango</li>
            <li id="track6">"El Tatuado" by Don Cheto</li>
            <li id="track7">"Se Me Perdió La Cadenita" by La Sonora Dinamita</li>
            <li id="track8">"Fiebre de Jack" by She's a Tease</li>
            <li id="track9">"Pachuco" by Maldita Vecindad</li>
            <li id="track10">"El Sonidito" by Hechizeros Band</li>
            <li id="track11">"Fresco" by Milkman</li>
            <li id="track12">"Maldito" by Jessy Bulbo</li>
            <li id="track13">"Tengo El Don" by La Liga feat. Alika</li>
            <li id="track14">"La Granja" by Los Tigres del Norte</li>
            <li id="track15">"El Rey Y Yo" by Los Ángeles Negros</li>
        </ul>
        <audio autoplay loop style="width: 900px;">
            <source src="https://files.ex3.lol/MEX_FINAL_MIX_32.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
        <br><br>
        <button onclick="rev()">Rewind 10s</button> <button id="stop" onclick="stop()">Stop</button> <button onclick="fwd()">Forward 10s</button>
        <br><br>
        <footer id="runtime">runtime: 0s</footer>
        <footer id="runtime2">(0m 0s 0ms)</footer>
        <footer style="font-size: 11px">^ this updates to your display's refresh rate, so its probably more accurate
            than the actual player</footer><br><br><br><i>The timing may be inaccurate, or completely wrong. I'm
            still working on it.</i><br>
        <i>This content is owned by Rockstar Games from the video game Grand Theft Auto V.<br>For takedowns, please
            consult the email link on the side of this page.</i>
    </div>

    <script>
        function rev () {
            const audio = document.querySelector('audio');
            audio.currentTime -= 10;
        }
        function stop () {
            const audio = document.querySelector('audio');
            if (audio.paused) {
                audio.currentTime = 0;
            } else {
                audio.pause();
                document.getElementById('stop').textContent = 'Stop (press again to reset)';
                setTimeout(() => {
                    document.getElementById('stop').textContent = 'Stop';
                }, 2100);
            }
        }
        function fwd () {
            const audio = document.querySelector('audio');
            audio.currentTime += 10;
        }
        function runtime() {
            const audio = document.querySelector('audio');
            const runtime = document.getElementById('runtime');
            runtime.textContent = `runtime: ${audio.currentTime.toFixed(0)}s`;
        }
        function runtime2() {
            const audio = document.querySelector('audio');
            const runtime = document.getElementById('runtime2');
            const time = audio.currentTime;
            const minutes = Math.floor(time / 60);
            const seconds = Math.floor(time % 60);
            const milliseconds = Math.floor((time - Math.floor(time)) * 1000);
            runtime.textContent = `(${minutes}m ${seconds}s ${milliseconds}ms)`;
        }
        function update() {
            runtime();
            runtime2();
            requestAnimationFrame(update);
        }

        requestAnimationFrame(update);
        document.querySelector('audio').setAttribute('controls', 'controls');
        const tracks = [
            { id: 'track0', start: 0, title: 'Intro'},
            { id: 'track1', start: 9.45, title: '"El Cocaino" by Los Buitres de Culiacan' },
            { id: 'track2', start: 148, title: '"Es-Toy" by Mexican Institute of Sound' },
            { id: 'track3', start: 246, title: '"Criminal Sound" by Niña Dioz' },
            { id: 'track4', start: 347, title: '"Radio Capital" by La Vida Bohème' },
            { id: 'track5', start: 500.5, title: '"Autos, Moda y Rock and Roll" by Fandango' },
            { id: 'track6', start: 629.8, title: '"El Tatuado" by Don Cheto' },
            { id: 'track7', start: 819, title: '"Se Me Perdió La Cadenita" by La Sonora Dinamita' },
            { id: 'track8', start: 987.3, title: '"Fiebre de Jack" by She\'s a Tease' },
            { id: 'track9', start: 1209, title: '"Pachuco" by Maldita Vecindad' },
            { id: 'track10', start: 1397, title: '"El Sonidito" by Hechizeros Band' },
            { id: 'track11', start: 1562, title: '"Fresco" by Milkman' },
            { id: 'track12', start: 1784, title: '"Maldito" by Jessy Bulbo' },
            { id: 'track13', start: 1953, title: '"Tengo El Don" by La Liga feat. Alika' },
            { id: 'track14', start: 2119, title: '"La Granja" by Los Tigres del Norte' },
            { id: 'track15', start: 2341, title: '"El Rey Y Yo" by Los Ángeles Negros' }
        ];
        const audio = document.querySelector('audio');
        audio.addEventListener('timeupdate', function () {
            let t = audio.currentTime, a = -1;
            tracks.forEach(e => {
                const i = document.getElementById(e.id);
                i.style.fontWeight = 'normal';
                i.classList.remove('highlight');
            });
            tracks.forEach((e, i) => {
                if (t >= e.start && (i === tracks.length - 1 || t < tracks[i + 1].start)) {
                    a = i;
                }
            });
            if (a !== -1) {
                const e = tracks[a];
                const i = document.getElementById(e.id);
                i.style.fontWeight = 'bold';
                i.classList.add('highlight');
                document.title = `${e.title}`; // set title, mainly for Samsung AODs, now-playing cards, etc..
            }
        });
        tracks.forEach(e => {
            document.getElementById(e.id).addEventListener('click', () => {
                audio.currentTime = e.start;
                audio.play();
            });
        });
        document.addEventListener("DOMContentLoaded", function () {
            if (/Mobi|Android/i.test(navigator.userAgent)) {
                console.log("[Device check] MOBILE DETECTED");
                document.querySelectorAll(".navbar").forEach(e => {
                    console.log("[Device check] DELETING NAVIGATION BAR");
                    e.parentNode.removeChild(e);
                });
                document.querySelectorAll(".container").forEach(e => {
                    console.log("[Device check] MOVING EVERYTHING");
                    e.style.position = "relative";
                    e.style.left = "0";
                    e.style.marginLeft = "0";
                });
                const t = document.createElement("div");
                t.textContent = "This site is not designed for mobile";
                t.style.backgroundColor = "#f8d7da";
                t.style.color = "#721c24";
                t.style.padding = "10px";
                t.style.textAlign = "center";
                t.style.position = "fixed";
                t.style.top = "0";
                t.style.left = "0";
                t.style.width = "100%";
                t.style.zIndex = "1000";
                document.body.insertBefore(t, document.body.firstChild);
            } else {
                console.log("[Device checker] NOT MOBILE");
            }
        });
    </script>
</body>

</html>
